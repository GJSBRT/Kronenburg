<html>

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width">
	<link href="style.css" rel="stylesheet" type="text/css" />
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.10/css/all.css"
		integrity="sha384-+d0P83n9kaQMCwj8F4RJB66tzIwOKmrdb46+porD/OvrJ+37WqIM7UoBtwHO6Nlg" crossorigin="anonymous">
	<style>
		#depositUI,
		#withdrawUI,
		#transferUI,
		#general,
		#topbar,
		#waiting,
		#transactionUI {
			display: none;
		}
		#zakelijkUI {
			display: none;
		}
	</style>
</head>

<body>
	<div class="container">
		<div id="result"></div>
		<div class="topbar" id="topbar">
			<div class="cont-p-1">
				<div class="parale-1 "></div>
			</div>
			<div class="cont-p-2">
				<div class="parale-2"></div>
			</div>
			<div class="cont-p-3">
				<div class="parale-3"></div>
			</div>
			<nav>
				<div class="logo-topbar"></div>
				<button class="btn-sign-out">Uitloggen<i class="fas fa-sign-out-alt"></i></button>
			</nav>
		</div>
		<!-- ########### GENERAL ###########  -->
		<div class="cont-content" id="general">
			<div class="flex">
				<div style="display: flex;flex-direction: column;">
					<div class="balance box-shadow">
						<p>Welkom<br>
							<span class="name"><span class="username1"></span></span><br>
							Uw saldo is<br>
							<span class="money"><span class="euro">€</span><span class="curbalance"></span></span>
						</p>
					</div>
					<div class="transactions box-shadow">
						<table style="border: 1px; border-radius: 3px;border-color: black;">
							<tr style="background-color: #f3f3f3;border-bottom: 3px;">
								<th>Tijdstip</th>
								<th>Hoeveelheid</th>
								<th>Reden</th>
								<th>+/-</th>
							</tr>
							<tbody id="particulierTransactionsTable">
							</tbody>
						</table>
					</div>
				</div>
				<div class="list-btn">
					<button class="btn btn-blue" id="deposit">
						<i class="far fa-money-bill-alt"></i>
						<span class="far fa-money-bill-alt icon"></span>
						<p style="margin-top: 10px">Storten<br>
							<span>Stort hier je geld op je rekening</span>
						</p>
					</button>
					<button class="btn btn-violet" id="withdraw">
						<i class="far fa-credit-card"></i>
						<span class="far fa-credit-card icon"></span>
						<p style="margin-top: 10px">Opnemen<br>
							<span>Neem hier geld op van je rekening</span>
						</p>
					</button>
					<button class="btn btn-orange" id="transfer">
						<i class="fas fa-exchange-alt"></i>
						<span class="fas fa-exchange-alt icon"></span>
						<p style="margin-top: 10px">Overmaken<br>
							<span>Maak geld over naar iemand anders</span>
						</p>
					</button>
					<button class="btn btn-orange" id="transactions">
						<i class="fas fa-list"></i>
						<span class="fas fa-list icon"></span>
						<p style="margin-top: 10px">Transacties<br>
							<span>Zie hier al je bank transacties</span>
						</p>
					</button>
					<button class="btn btn-orange" id="zakelijk-btn" style="display:none">
						<i class="fas fa-list"></i>
						<span class="fas fa-list icon"></span>
						<p style="margin-top: 10px">ABN Zakelijk<br>
							<span>Beheer uw bedrijfs financiele aspecten</span>
						</p>
					</button>
				</div>
			</div>
		</div>
		<!-- ########### ZAKELIJK ###########  -->
		<div class="cont-content" id="zakelijkUI">
			<div class="flex">
				<div style="display: flex;flex-direction: column;">
					<div class="balance box-shadow">
						<p>Welkom<br>
							<span class="name"><span class="username1"></span></span><br>
							Uw bedrijfs saldo is<br>
							<span class="money"><span class="euro">€</span><span id="zakelijkBalance"></span></span>
						</p>
					</div>
					<div class="transactions box-shadow">
						<table style="border: 1px; border-radius: 3px;border-color: black; width: 100%;">
							<tr style="background-color: #f3f3f3;border-bottom: 3px;">
								<th>Tijdstip</th>
								<th>Hoeveelheid</th>
								<th>Reden</th>
								<th>+/-</th>
							</tr>
							<tbody id="zakelijkTransactionsTable">
							</tbody>
						</table>
					</div>
				</div>
				<div class="list-btn-none">
					<button class="btn btn-blue back">
						<i class="far fa-money-bill-alt"></i>
						<span class="far fa-money-bill-alt icon"></span>
						<p style="margin-top: 10px">Terug<br>
							<span>Ga terug naar particulier overzicht</span>
						</p>
					</button>
					<button class="btn btn-orange" style="margin-top: 1rem;" id="transactionszakelijk">
						<i class="fas fa-list"></i>
						<span class="fas fa-list icon"></span>
						<p style="margin-top: 10px">Transacties<br>
							<span>Zie hier al je bank transacties</span>
						</p>
					</button>
				</div>
			</div>
		</div>
		<!-- ZAKELIJKE TRANSACTIONS -->
		<div class="cont-content" id="zakelijktransactionsUI" style="display: none;">
			<div class="flex">
				<div class="btn btn-blue banniere">
					<p>Transacties<br>
						<span>Bekijk hier al je transacties</span>
					</p>
				</div>
				<button class="btn btn-grey back">
					<i class="fas fa-bars"></i>
					<span class="fas fa-arrow-left icon"></span>
					<p style="margin-top: 10px">Terug<br>
						<span>Naar het hoofdmenu</span>
					</p>
				</button>
			</div>
			<div class="transactions box-shadow"
				style="margin-top: 30px !important;width: 90%;height: 250px;max-height: 250px;overflow-y: auto;">
				<table style="border: 1px; border-radius: 3px;border-color: black;width: 100%;">
					<tr style="background-color: #f3f3f3;border-bottom: 3px;">
						<th style="font-size: 20px;">Tijdstip</th>
						<th style="font-size: 20px;">Hoeveelheid</th>
						<th style="font-size: 20px;">Reden</th>
						<th style="font-size: 20px;">+/-</th>
					</tr>
					<tbody id="zakelijktransactionsTablePage">
					</tbody>
				</table>
			</div>
		</div>
		<!-- TRANSACTIONS -->
		<div class="cont-content" id="transactionsUI" style="display: none;">
			<div class="flex">
				<div class="btn btn-blue banniere">
					<p>Transacties<br>
						<span>Bekijk hier al je transacties</span>
					</p>
				</div>
				<button class="btn btn-grey back">
					<i class="fas fa-bars"></i>
					<span class="fas fa-arrow-left icon"></span>
					<p style="margin-top: 10px">Terug<br>
						<span>Naar het hoofdmenu</span>
					</p>
				</button>
			</div>
			<div class="transactions box-shadow"
				style="margin-top: 30px !important;width: 90%;height: 250px;max-height: 250px;overflow-y: auto;">
				<table style="border: 1px; border-radius: 3px;border-color: black;width: 100%;">
					<tr style="background-color: #f3f3f3;border-bottom: 3px;">
						<th style="font-size: 20px;">Tijdstip</th>
						<th style="font-size: 20px;">Hoeveelheid</th>
						<th style="font-size: 20px;">Reden</th>
						<th style="font-size: 20px;">+/-</th>
					</tr>
					<tbody id="transactionsTablePage">
					</tbody>
				</table>
			</div>
		</div>
		<!-- ########### DEPOSIT ###########  -->
		<div class="cont-content" id="depositUI">
			<div class="flex">
				<div class="btn btn-blue banniere">
					<p>Stort uw geld<br>
						<span>Wij zijn de meeste veiligste bank van de stad</span>
					</p>
				</div>
				<button class="btn btn-grey back">
					<i class="fas fa-bars"></i>
					<span class="fas fa-arrow-left icon"></span>
					<p style="margin-top: 10px">Terug<br>
						<span>Naar het hoofdmenu</span>
					</p>
				</button>
			</div>
			<form id="deposit1">
				<div class="input-cont box-shadow">
					<label>Hoeveel wilt u storten</label>
					<input id="amount" type="number" placeholder="€0">
				</div>
				<button class="btn btn-green" type="submit">
					<i class="fas fa-check"></i>
					<span class="fas fa-check icon"></span>
					<p style="margin-top: 10px">Bevestig<br>
						<span>U gestorte bedrag</span>
					</p>
				</button>
			</form>
		</div>
		<!-- ########### WITHDRAW ###########  -->
		<div class="cont-content" id="withdrawUI">
			<div class="flex">
				<div class="btn btn-violet banniere">
					<p>Neem hier uw geld op<br>
						<span>van uw rekening</span>
					</p>
				</div>
				<button class="btn btn-grey back">
					<i class="fas fa-bars"></i>
					<span class="fas fa-arrow-left icon"></span>
					<p style="margin-top: 10px">Terug<br>
						<span>Naar het hoofdmenu</span>
					</p>
				</button>
			</div>
			<form id="withdraw1">
				<div class="input-cont box-shadow">
					<label>Hoeveel wilt u opnemen</label>
					<input id="amountw" type="number" placeholder="€0">
				</div>
				<button class="btn btn-green" type="submit">
					<i class="fas fa-check"></i>
					<span class="fas fa-check icon"></span>
					<p style="margin-top: 10px">Bevestig<br>
						<span>U opgenomen bedrag</span>
					</p>
				</button>
			</form>
		</div>
		<!-- ########### TRANSFER ###########  -->
		<div class="cont-content" id="transferUI">
			<div class="flex">
				<div class="btn btn-orange banniere">
					<p>Geld overmaken<br>
						<span>Naar je vrienden of familie</span>
					</p>
				</div>
				<button class="btn btn-grey back">
					<i class="fas fa-bars"></i>
					<span class="fas fa-arrow-left icon"></span>
					<p style="margin-top: 10px">Terug<br>
						<span>Naar het hoofdmenu</span>
					</p>
				</button>
			</div>
			<form id="transfer1">
				<div class="double-input">
					<div class="input-cont box-shadow">
						<label>Hoeveel wilt u overmaken?</label>
						<input id="amountt" type="number" placeholder="€0">
					</div>
					<div class="input-cont box-shadow">
						<label>Naar wie wilt u het geld overmaken?</label>
						<input id="to" type="text" placeholder="Speler ID">
					</div>
				</div>
				<button class="btn btn-green" type="submit">
					<i class="fas fa-check"></i>
					<span class="fas fa-check icon"></span>
					<p style="margin-top: 10px">Bevestig<br>
						<span>U overgemaakte bedrag</span>
					</p>
				</button>
			</form>
		</div>
		<!-- ########### WAITING ###########  -->
		<div class="cont-waiting" id="waiting">
			<div class="content-waiting">
				<img src="media/img/abnamro.svg" style="height:6rem;width:auto;margin-top:70px" />
				<p>Login met<br>
					uw vingerafdruk</p>
				<div id="fingerprint-content">
					<div class="fingerprint-default"></div>
					<div class="fingerprint-active"></div>
					<div class="fingerprint-bar"></div>
				</div>
			</div>
			<div class="bg-waiting">
				<div class="cont-p-4">
					<div class="parale-4"></div>
				</div>
				<div class="cont-p-5">
					<div class="parale-5"></div>
				</div>
				<div class="cont-p-6">
					<div class="parale-6"></div>
				</div>
				<div class="cont-p-7">
					<div class="parale-7"></div>
				</div>
			</div>
		</div>
	</div>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
	<script src="nui://game/ui/jquery.js" type="text/javascript"></script>
	<script type="text/javascript">
		$(function () {
			isZakelijk = false;
			window.addEventListener('message', function (event) {
				if (event.data.type === "openGeneral") {
					$('#waiting').show();
					$('body').addClass("active");
				} else if (event.data.type === "balanceHUD") {
					$('.username1').html(event.data.player);
					$('.curbalance').html(event.data.balance);
					isZakelijk = event.data.isZakelijk;
					if (event.data.isZakelijk) {
						$('#zakelijk-btn').show();
						$('#zakelijkBalance').html(event.data.zakelijkBalance);
					}
				} else if (event.data.type === "closeAll") {
					$('#waiting, #general, #transferUI, #withdrawUI, #depositUI, #topbar, #transactionsUI, #zakelijkUI').hide();
					$('body').removeClass("active");
				}
				else if (event.data.type === "result") {
					if (event.data.t == "success")
						$("#result").attr('class', 'alert-green');
					else
						$("#result").attr('class', 'alert-orange');
					$("#result").html(event.data.m).show().delay(5000).fadeOut();
				} else if (event.data.type === "transactions_zakelijk") {
					var formatter = new Intl.NumberFormat('nl-NL', {
						style: 'currency',
						currency: 'EUR',
					});
					if (isZakelijk) {
							buildTable(JSON.parse(event.data.transactions_zakelijk))

						function buildTable(data) {
							var table = document.getElementById('zakelijkTransactionsTable')

							table.innerHTML = ""

							for (var i = 0; i < data.length; i++) {
								if (i < 3) {
									var date = new Date(data[i].created_at);

									var time = date.getDate() +
										"/" + (date.getMonth() + 1) +
										"/" + date.getFullYear() +
										" " + date.getHours() +
										":" + date.getMinutes() +
										":" + date.getSeconds()

									if (data[i].taken == 1) {
										taken = "Af"
									} else {
										taken = "Op"
									}
									var row = `<tr>
														<td>${time}</td>
														<td>${formatter.format(data[i].amount)}</td>
														<td>${data[i].reason}</td>
														<td>${taken}</td>
												</tr>`
									table.innerHTML += row
								}
							}

							var table = document.getElementById('zakelijktransactionsTablePage')

							table.innerHTML = ""

							for (var i = 0; i < data.length; i++) {
								var date = new Date(data[i].created_at);

								var time = date.getDate() +
									"/" + (date.getMonth() + 1) +
									"/" + date.getFullYear() +
									" " + date.getHours() +
									":" + date.getMinutes() +
									":" + date.getSeconds()

								if (data[i].taken == 1) {
									taken = "Af"
								} else {
									taken = "Op"
								}
								var row = `<tr>
													<td>${time}</td>
													<td>${formatter.format(data[i].amount)}</td>
													<td>${data[i].reason}</td>
													<td>${taken}</td>
											</tr>`
								table.innerHTML += row
							}
						}
					}
				} else if (event.data.type === "transactions") {
					var formatter = new Intl.NumberFormat('nl-NL', {
						style: 'currency',
						currency: 'EUR',
					});
					buildTable(JSON.parse(event.data.transactions))

					function buildTable(data) {
						var table = document.getElementById('particulierTransactionsTable')

						table.innerHTML = ""

						for (var i = 0; i < data.length; i++) {
							if (i < 3) {
								var date = new Date(data[i].date);

								var time = date.getDate() +
									"/" + (date.getMonth() + 1) +
									"/" + date.getFullYear() +
									" " + date.getHours() +
									":" + date.getMinutes() +
									":" + date.getSeconds()

								if (data[i].taken == 1) {
									taken = "Af"
								} else {
									taken = "Op"
								}
								var row = `<tr>
													<td>${time}</td>
													<td>${formatter.format(data[i].amount)}</td>
													<td>${data[i].reason}</td>
													<td>${taken}</td>
											</tr>`
								table.innerHTML += row
							}
						}

						var table = document.getElementById('transactionsTablePage')

						table.innerHTML = ""

						for (var i = 0; i < data.length; i++) {
							var date = new Date(data[i].date);

							var time = date.getDate() +
								"/" + (date.getMonth() + 1) +
								"/" + date.getFullYear() +
								" " + date.getHours() +
								":" + date.getMinutes() +
								":" + date.getSeconds()

							if (data[i].taken == 1) {
								taken = "Af"
							} else {
								taken = "Op"
							}
							var row = `<tr>
												<td>${time}</td>
												<td>${formatter.format(data[i].amount)}</td>
												<td>${data[i].reason}</td>
												<td>${taken}</td>
										</tr>`
							table.innerHTML += row
						}
					}
				}
			});
		});
		$('.btn-sign-out').click(function () {
			$('#general, #waiting, #transferUI, #withdrawUI, #depositUI, #topbar, #transactionsUI, #zakelijkUI, #zakelijktransactionsUI').hide();
			$('body').removeClass("active");
			$.post('http://new_banking/NUIFocusOff', JSON.stringify({}));
		})
		$('.back').click(function () {
			$('#depositUI, #withdrawUI, #transferUI, #transactionsUI, #zakelijkUI, #zakelijktransactionsUI').hide();
			$('#general').show();
		})
		$('#deposit').click(function () {
			$('#general').hide();
			$('#depositUI').show();
		})
		$('#withdraw').click(function () {
			$('#general').hide();
			$('#withdrawUI').show();
		})
		$('#transfer').click(function () {
			$('#general').hide();
			$('#transferUI').show();
		})
		$('#transactions').click(function () {
			$('#general').hide();
			$('#transactionsUI').show();
		})
		$('#transactionszakelijk').click(function () {
			$('#general').hide();
			$('#zakelijkUI').hide();
			$('#zakelijktransactionsUI').show();
		})
		$('#zakelijk-btn').click(function () {
			$('#general').hide();
			$('#zakelijkUI').show();
		})
		$('#fingerprint-content').click(function () {
			$('.fingerprint-active, .fingerprint-bar').addClass("active")
			setTimeout(function () {
				$('#general').css('display', 'block')
				$('#topbar').css('display', 'flex')
				$('#waiting').css('display', 'none')
				$('.fingerprint-active, .fingerprint-bar').removeClass("active")
			}, 1400);
		})
		$("#deposit1").submit(function (e) {
			e.preventDefault(); // Prevent form from submitting
			$.post('http://new_banking/deposit', JSON.stringify({
				amount: $("#amount").val()
			}));
			$('#depositUI').hide();
			$('#general').show();
			$("#amount").val('');
		});
		$("#transfer1").submit(function (e) {
			e.preventDefault(); // Prevent form from submitting
			$.post('http://new_banking/transfer', JSON.stringify({
				to: $("#to").val(),
				amountt: $("#amountt").val()
			}));
			$('#transferUI').hide();
			$('#general').show();
			$("#amountt").val('');
		});
		$("#withdraw1").submit(function (e) {
			e.preventDefault(); // Prevent form from submitting
			$.post('http://new_banking/withdrawl', JSON.stringify({
				amountw: $("#amountw").val()
			}));
			$('#withdrawUI').hide();
			$('#general').show();
			$("#amountw").val('');
		});
		document.onkeyup = function (data) {
			if (data.which == 27) {
				$('#general, #waiting, #transferUI, #withdrawUI, #depositUI, #topbar, #transactionsUI, #zakelijkUI, #zakelijktransactionsUI').hide();
				$('body').removeClass("active");
				$.post('http://new_banking/NUIFocusOff', JSON.stringify({}));
			}
		}
	</script>
</body>

</html>